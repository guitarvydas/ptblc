#!/bin/sh
x=${1:-o//lam2bin}

t() {
  y="$(printf %s "$2" | $x)" || {
    printf %s\\n "$x: $2 return code: '$?'" >&2
    exit 1
  }
  if ! [ "$y" = "$1" ]; then
    printf %s\\n "$x: $2 failed: want '$1' got '$y'" >&2
    exit 1
  fi
}

t 0010                '\a.a'
t 0010                '\x.x'
t 000010              '\yx.x'
t 00000110110         '\yx.xy'
t 0000000101111011010 '\xyz.xyz'
t 0000000101111011010 '\xyz.(xy)z'
t 0000000111100111010 '\xyz.x(yz)'
t 000101101000011010  '\x.xx\x.xx'
t 000101101000011010  '\x.xx(\x.xx)'
t 010001101000011010  '(\x.xx)(\x.xx)'
t 010001101000011010  '(\x.xx)\x.xx'

t 0010                'λ𝑥.𝑥'
t 000010              'λyx.x'
t 00000110110         'λyx.xy'
t 0000000101111011010 'λ𝑥𝑦𝑧.𝑥𝑦𝑧'
t 0000000101111011010 'λxyz.(xy)z'
t 0000000111100111010 'λxyz.x(yz)'
t 000101101000011010  'λ𝘅.𝘅𝘅λ𝘅.𝘅𝘅'
t 000101101000011010  'λx.xx(λ𝕩.𝕩𝕩)'
t 010001101000011010  '(λ𝔣.𝔣𝔣)(λ𝔣.𝔣𝔣)'
t 010001101000011010  '(λx.xx)λx.xx'

t 00011010            'ω'
t 00000110110         '^'
t 0000010111010110    '∧'
t 0000010111011010    '∨'
t 0000000111100111010 '*'
t 000101100000100000110 '¬'
t 000000000101111101100101111011010 '+'
t 00000101110010001011000001000001101010 '⊻'
t 00000101100000000101011110000001100111011110001100010110 '-'
t 000101000100011010000111001101000000000000100010101000101100000001000001101001010000101110110011110010101011111110101111011101100101000001011000000001010111100000011001110111100011000101101111011100100000001110010111101101010 '/'
